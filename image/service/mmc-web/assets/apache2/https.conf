<VirtualHost _default_:443>

	ServerName ${HOSTNAME}
	ServerAdmin ${MMC_WEB_SERVER_ADMIN}
	ServerPath ${MMC_WEB_SERVER_PATH}

	DocumentRoot /usr/share/mmc

	Include /etc/apache2/conf-available/vhost-partial-ssl.conf

	SSLCertificateFile    ${CONTAINER_SERVICE_DIR}/mmc-web/assets/apache2/certs/${MMC_WEB_HTTPS_CRT_FILENAME}
	SSLCertificateKeyFile ${CONTAINER_SERVICE_DIR}/mmc-web/assets/apache2/certs/${MMC_WEB_HTTPS_KEY_FILENAME}
	#SSLCACertificateFile ${CONTAINER_SERVICE_DIR}/mmc-web/assets/apache2/certs/${MMC_WEB_HTTPS_CA_CRT_FILENAME}

	SetOutputFilter DEFLATE
	DeflateCompressionLevel 9
	AddOutputFilterByType DEFLATE text/html application/javascript text/plain text/css application/json application/x-javascript text/xml application/xml application/xml+rss text/javascript application/vnd.ms-fontobject application/x-font-ttf font/opentype image/svg+xml image/x-icon
	Header append Vary User-Agent env=!dont-vary

	<Filesmatch "\.(ico|css|js|gif|jpg|jpeg|png|svg|eot|ttf|woff|woff2)$">
		ExpiresActive on
		ExpiresDefault "access plus 30 days"
	</Filesmatch>

	<Directory /usr/share/mmc >
		Require all granted
	</Directory>

</VirtualHost>
